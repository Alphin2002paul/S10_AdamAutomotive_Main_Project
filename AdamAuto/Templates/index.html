{% load static %}

<!DOCTYPE html>
<html lang="en">
  {% comment %}hi{% endcomment %}
  <head>
    <title>Adam Automotive - Website For Luxury Used Cars</title>
    <link rel="icon" href="{% static 'images/logo.png' %}" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    <link href="https://fonts.googleapis.com/css?family=Poppins:200,300,400,500,600,700,800&display=swap" rel="stylesheet" />

    <link rel="stylesheet" href="{% static 'css/open-iconic-bootstrap.min.css' %}" />
    <link rel="stylesheet" href="{% static 'css/animate.css' %}" />

    <link rel="stylesheet" href="{% static 'css/owl.carousel.min.css' %}" />
    <link rel="stylesheet" href="{% static 'css/owl.theme.default.min.css' %}" />
    <link rel="stylesheet" href="{% static 'css/magnific-popup.css' %}" />

    <link rel="stylesheet" href="{% static 'css/aos.css' %}" />

    <link rel="stylesheet" href="{% static 'css/ionicons.min.css' %}" />

    <link rel="stylesheet" href="{% static 'css/bootstrap-datepicker.css' %}" />
    <link rel="stylesheet" href="{% static 'css/jquery.timepicker.css' %}" />

    <link rel="stylesheet" href="{% static 'css/flaticon.css' %}" />
    <link rel="stylesheet" href="{% static 'css/icomoon.css' %}" />
    <link rel="stylesheet" href="{% static 'css/style.css' %}" />
    <style>
      .navbar {
        position: fixed;
        top: 0;
        width: 100%;
        z-index: 1000; /* Ensure it stays on top of other elements */
        background-color: rgba(0, 0, 0, 0.8); /* Optional: Semi-transparent background */
      }
    </style>
  </head>

  <body>
    <nav class="navbar navbar-expand-lg navbar-dark ftco_navbar bg-dark ftco-navbar-light" id="ftco-navbar">
      <div class="container">
        <a class="navbar-brand">Adam&nbsp;<span>Automotive</span></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#ftco-nav" aria-controls="ftco-nav" aria-expanded="false" aria-label="Toggle navigation"><span class="oi oi-menu"></span> Menu</button>

        <div class="collapse navbar-collapse" id="ftco-nav">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item active">
              <a href="#" class="nav-link">Home</a>
            </li>
            <li class="nav-item">
              <a href="#ab" class="nav-link">About</a>
            </li>
            <li class="nav-item">
              <a href="{% url 'userdisplaycarnologin_dtl' %}" class="nav-link">Cars Collection</a>
            </li>
            <li class="nav-item">
              <a href="#con" class="nav-link">Contact</a>
            </li>
            <li class="nav-item">
              <a href="{% url 'login' %}" class="nav-link">Login</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="hero-wrap ftco-degree-bg" style="background-image: url('{% static 'images/bg_1.jpg' %}');" data-stellar-background-ratio="0.5">
      <div class="overlay"></div>
      <div class="container">
        <div class="row no-gutters slider-text justify-content-start align-items-center justify-content-center">
          <div class="col-lg-8 ftco-animate">
            <div class="text w-100 text-center mb-md-5 pb-md-5">
              <h1 class="mb-4">Here We Give Wings For Your Dream Cars</h1>
              <p style="font-size: 18px;">Dream is not that which you see while sleeping it is something that does not let you sleep.</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <section class="ftco-section ftco-about" id="ab">
      <div class="container">
        <div class="row no-gutters">
          <div class="col-md-6 p-md-5 img img-2 d-flex justify-content-center align-items-center" style="background-image: url({% static 'images/about.jpg' %});"></div>
          <div class="col-md-6 wrap-about ftco-animate">
            <div class="heading-section heading-section-white pl-md-5">
              <span class="subheading">About us</span>
              <h2 class="mb-4">Welcome to Adam Automotive</h2>

              <p>Before we get ahead of ourselves, we want to welcome you to Adam Automotive. While nothing can replace the on-the-lot experience. We appreciate you taking the time today to visit our website. Our goal is to give you an interactive tour of our used car inventory, as well as allow you to conveniently get the best option or apply for financing. The search for a used luxury car is filled with high expectations. Undoubtedly, that has a lot to do with the vehicles you are considering, but at Harman Motors, we think you should also have pretty high expectations for your dealership.</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <br />
    <footer class="ftco-footer ftco-bg-dark ftco-section">
      <div class="container">
        <div class="row mb-5">
          <div class="col-md">
            <div class="ftco-footer-widget mb-4">
              <h2 class="ftco-heading-2"><a href="#" class="logo">Adam&nbsp;<span>Automotive</span></a></h2>
              <p>Money may not buy happiness, but I'd rather cry in a Jaguar than on a bus.</p>
              <ul class="ftco-footer-social list-unstyled float-md-left float-lft mt-5">
                <li class="ftco-animate">
                  <a href="https://twitter.com/"><span class="icon-twitter"></span></a>
                </li>
                <li class="ftco-animate">
                  <a href="https://www.facebook.com/"><span class="icon-facebook"></span></a>
                </li>
                <li class="ftco-animate">
                  <a href="https://www.instagram.com/"><span class="icon-instagram"></span></a>
                </li>
              </ul>
            </div>
          </div>
          <div class="col-md" id="con">
            <div class="ftco-footer-widget mb-4 ml-md-5">
              <h2 class="ftco-heading-2">Information</h2>
              <ul class="list-unstyled">
                <li>
                  <a href="#ab" class="py-2 d-block">About</a>
                </li>
                <li>
                  <a href="#" id="termsAndConditions" class="py-2 d-block">Terms and Conditions</a>
                </li>
              </ul>
            </div>
          </div>
          <div class="col-md">
            <div class="ftco-footer-widget mb-4">
              <h2 class="ftco-heading-2">Timing</h2>
              <ul class="list-unstyled">
                <li>
                  <a class="py-2 d-block">Monday-Sunday</a>
                </li>
                <li>
                  <a class="py-2 d-block">Working Hours: 9am-10pm</a>
                </li>
              </ul>
            </div>
          </div>
          <div class="col-md">
            <div class="ftco-footer-widget mb-4">
              <h2 class="ftco-heading-2">Have a Questions?</h2>
              <div class="block-23 mb-3">
                <ul>
                  <li>
                    <a><span class="icon icon-map-marker"></span><span class="text">Adam Towers, Edappally Kochi , Kerala - 683544</span></a>
                  </li>

                  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
                  <script>
                    document.getElementById('termsAndConditions').addEventListener('click', function (e) {
                      e.preventDefault()
                      Swal.fire({
                        title: 'Terms and Conditions of Adam Automotive',
                        html: `
                            <p>1. All sales are final.</p>
                            <p>2. No Vehilces Which Has Any Kind Of Accidents And Flood Are Sold.</p>
                            <p>3. Adam Automotive reserves the right to refuse service to anyone.</p>
                            <p>4. Test drives are subject to approval and require a valid driver's license.</p>
                            <p>5. Prices are subject to change without notice.</p>
                          `,
                        confirmButtonText: 'Okay',
                        confirmButtonColor: '#d39e00'
                      })
                    })
                  </script>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </footer>

    <!-- Chatbot Integration -->
    <div id="chatbot" style="position: fixed; bottom: 20px; right: 20px; width: 350px; border: 1px solid #ccc; border-radius: 10px; background-color: white; display: none; box-shadow: 0 2px 10px rgba(0,0,0,0.2);">
      <div style="padding: 10px; background-color: #007bff; color: white; border-radius: 10px 10px 0 0;">
        <strong>Chat with Us!</strong>
        <button onclick="toggleChatbot()" style="float: right; background: none; border: none; color: white;">X</button>
      </div>
      <div id="chatbot-messages" style="height: 250px; overflow-y: auto; padding: 10px; font-family: Arial, sans-serif;">
        <!-- Messages will appear here -->
      </div>
      <div style="padding: 10px;">
        <input type="text" id="chatbot-input" placeholder="Ask me anything..." style="width: calc(100% - 20px); padding: 5px; border-radius: 5px; border: 1px solid #ccc;" />
        <button onclick="sendMessage()" style="margin-left: 5px; padding: 5px 10px; background-color: #007bff; color: white; border: none; border-radius: 5px;">Send</button>
      </div>
    </div>
    <button onclick="toggleChatbot()" style="position: fixed; bottom: 20px; right: 20px; background-color: #007bff; color: white; border: none; border-radius: 5px; padding: 10px;">Chat with us!</button>

    <!-- Add Google AI SDK -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
      const API_KEY = 'AIzaSyD1QO8FrKu4g9GcLu5APcYwlaqwjh0yrD8';
      const API_URL = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent';

      function toggleChatbot() {
        const chatbot = document.getElementById('chatbot');
        chatbot.style.display = chatbot.style.display === 'none' ? 'block' : 'none';
        
        if (chatbot.style.display === 'block') {
          const messages = document.getElementById('chatbot-messages');
          if (messages.innerHTML === '') {
            messages.innerHTML = `<div><strong>Bot:</strong> Welcome to Adam Automotive! I'm your AI assistant. How can I help you with our luxury car collection today?</div>`;
          }
        }
      }

      function redirectToService() {
        window.location.href = "{% url 'bookservice_dtl' %}";
      }

      function redirectToCars() {
        window.location.href = "{% url 'userdisplaycarnologin_dtl' %}";
      }

      async function sendMessage() {
        const input = document.getElementById('chatbot-input');
        const message = input.value.trim();
        if (message) {
          const messagesDiv = document.getElementById('chatbot-messages');
          messagesDiv.innerHTML += `<div><strong>User:</strong> ${message}</div>`;
          input.value = '';

          // Check for service-related keywords
          const serviceKeywords = ['book service', 'service booking', 'car service', 'maintenance', 'repair', 'service'];
          const isServiceRequest = serviceKeywords.some(keyword => 
            message.toLowerCase().includes(keyword.toLowerCase())
          );

          // Check for car-related keywords
          const carKeywords = ['show cars', 'car collection', 'available cars', 'cars', 'view cars', 'display cars', 'see cars'];
          const isCarRequest = carKeywords.some(keyword => 
            message.toLowerCase().includes(keyword.toLowerCase())
          );

          if (isServiceRequest) {
            messagesDiv.innerHTML += `<div><strong>Bot:</strong> I understand you want to book a service. You can book your service appointment right away by clicking the button below:
              <br><br>
              <button onclick="redirectToService()" 
                      style="background-color: #007bff; 
                             color: white; 
                             border: none; 
                             padding: 8px 15px; 
                             border-radius: 5px; 
                             cursor: pointer;
                             font-weight: bold;
                             box-shadow: 0 2px 4px rgba(0,0,0,0.2);">
                Book Service Now
              </button>
            </div>`;
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
            return;
          }

          if (isCarRequest) {
            messagesDiv.innerHTML += `<div><strong>Bot:</strong> I'll be happy to show you our luxury car collection. Click the button below to view all our available cars:
              <br><br>
              <button onclick="redirectToCars()" 
                      style="background-color: #007bff; 
                             color: white; 
                             border: none; 
                             padding: 8px 15px; 
                             border-radius: 5px; 
                             cursor: pointer;
                             font-weight: bold;
                             box-shadow: 0 2px 4px rgba(0,0,0,0.2);">
                View Car Collection
              </button>
            </div>`;
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
            return;
          }

          // Show typing indicator
          const typingDiv = document.createElement('div');
          typingDiv.id = 'typing-indicator';
          typingDiv.innerHTML = '<strong>Bot:</strong> Typing...';
          messagesDiv.appendChild(typingDiv);

          try {
            const response = await fetch(`${API_URL}?key=${API_KEY}`, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
              },
              body: JSON.stringify({
                contents: [{
                  parts: [{
                    text: `You are an AI assistant for Adam Automotive, a luxury used car dealership. Here's the complete context about our business:

                    BUSINESS DETAILS:
                    - Name: Adam Automotive
                    - Type: Premium used car dealership specializing in luxury vehicles
                    - Location: Adam Towers, Edappally Kochi, Kerala - 683544
                    - Working Hours: Monday-Sunday, 9am-10pm

                    SERVICES OFFERED:
                    1. Car Sales:
                       - Luxury used cars
                       - Premium vehicle collection
                       - Test drives available
                       - Financing options
                       - Purchase online
                    
                    2. Car Service:
                       - Regular maintenance
                       - Repair services
                       - Service booking available online
                       - Professional technicians
                    
                    WEBSITE FEATURES:
                    - Online car browsing
                    - Service booking system
                    - User registration/login
                    - Car details and specifications
                    - Contact information
                    - Book Online
                    
                    POLICIES:
                    1. Sales Policies:
                       - All sales are final
                       - No vehicles with accident history
                       - No flood-damaged vehicles
                       - Test drives require valid license
                    
                    2. Service Policies:
                       - Appointment required
                       - Professional inspection
                       - Quality assurance
                       - Without a reason We can Reject the Service
                       - Genuine parts only

                    CONTACT OPTIONS:
                    - Physical visit to showroom
                    - Online enquiry
                    - Phone consultation
                    - Service booking portal

                    Please respond to this customer query professionally and accurately based on the above information: ${message}`
                  }]
                }]
              })
            });

            const data = await response.json();
            
            // Remove typing indicator
            const typingIndicator = document.getElementById('typing-indicator');
            if (typingIndicator) {
              typingIndicator.remove();
            }

            // Add AI response
            if (data.candidates && data.candidates[0].content) {
              const aiResponse = data.candidates[0].content.parts[0].text;
              messagesDiv.innerHTML += `<div><strong>Bot:</strong> ${aiResponse}</div>`;
            } else {
              messagesDiv.innerHTML += `<div><strong>Bot:</strong> I apologize, but I'm having trouble generating a response right now. Please try again.</div>`;
            }
          } catch (error) {
            console.error('Error:', error);
            const typingIndicator = document.getElementById('typing-indicator');
            if (typingIndicator) {
              typingIndicator.remove();
            }
            messagesDiv.innerHTML += `<div><strong>Bot:</strong> I apologize, but I'm having trouble connecting right now. Please try again later.</div>`;
          }

          // Auto-scroll to bottom
          messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }
      }

      // Allow Enter key to send messages
      document.getElementById('chatbot-input').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          sendMessage();
        }
      });
    </script>
  </body>
</html>
